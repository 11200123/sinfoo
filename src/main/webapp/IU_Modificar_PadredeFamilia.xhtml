<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
        <h:head>
            <title>Modificar Padre de familia</title>
        </h:head>
        <h:body>
            
            <p:layoutUnit position="north" size="150" style="text-align: center;">
                <p:outputLabel
                    rendered="true"
                    value="I.E.P. Juan Pablo Peregrino" 
                    style="font-family: Comic Sans MS;font-size: 50px;background-image: url('./src/fondo.png');"/>
                <p:outputLabel/>
            </p:layoutUnit>
            <h:form>  
                <p:growl id="messages"/>

                <p:menubar>
                    
                    <p:menuitem value="Atras" action="#{modificarpadre.volverMenu}"  icon="ui-icon-carat-1-e" />

                    <f:facet name="options">
                        <p:outputLabel rendered="true" value="Bienvenido: #{modificarpadre.nombreUser}  "/>
                        <p:outputLabel rendered="true" value="Rol: #{modificarpadre.rolsito}  "/>
                        <p:commandButton  value="Salir" action="#{modificarpadre.salir}" icon="ui-icon-extlink" />
                    </f:facet>
                </p:menubar>
            </h:form>
            <p:tabView 
                orientation="left"
                style="border: transparent;">
                <p:tab title="Gestión de Padre de familia">
                    
                        <p:tab title="Modificar padre de familia" >
                            <h:form>
                                <p:scrollPanel
                                    style="height:330px">
                                    <p:panel id="panel0"
                                             rendered="#{modificarpadre.mostrado[0]}"
                                             closable="true"
                                             toggleable="true"
                                             style="border: transparent;">
                                        <p:outputLabel rendered="true" value="Modificar Información General del Padre:"/>
                                        
                                            <h:panelGrid columns="3" cellpadding="10">
                                                <p:outputLabel rendered="true" value="Ingrese nombre o parte del nombre"/>
                                                <p:inputText id="busquedaAlumno" value="#{modificarpadre.nombreBuscado}"/>
                                                <p:commandButton value="Buscar" action="#{modificarpadre.buscarPadres}" update="tablaPadres"/>
                                            </h:panelGrid>	
                                            <p:dataTable
                                                id="tablaPadres"
                                                var="matricula"
                                                value="#{modificarpadre.listaPadres}"
                                                selection="#{modificarpadre.padreSeleccionado}"
                                                selectionMode="single"
                                                rowKey="#{matricula.idUsuario}">
                                                <p:column headerText="Apellido Paterno">
                                                    <h:outputText value="#{matricula.padreDeFamilia.apePat}" />
                                                </p:column>
                                                <p:column headerText="Apellido Materno">
                                                    <h:outputText value="#{matricula.padreDeFamilia.apeMat}" />
                                                </p:column>
                                                <p:column headerText="Primer Nombre">
                                                    <h:outputText value="#{matricula.padreDeFamilia.nombre1}" />
                                                </p:column>
                                                <p:column headerText="Segundo Nombre">
                                                    <h:outputText value="#{matricula.padreDeFamilia.nombre2}" />
                                                </p:column>
                                            </p:dataTable>
                                        <br/>
                                    </p:panel>
                                    
                                    <p:panel id="panel1"
                                             rendered="#{modificarpadre.mostrado[1]}"
                                             closable="true"
                                             toggleable="true"
                                             style="border: transparent;">
                                        
                                        <p:outputLabel rendered="true" value="Modificar Información General del Padre Seleccionado:"/>
                                        <h:panelGrid columns="2" cellpadding="10">
                                            <p:outputLabel for="apepatapo" value="Apellido paterno: "/>
                                            <p:inputText  id="apepatapo" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.apePat}" /> 
                                            <p:outputLabel for="apematapo" value="Apellido materno: "/>
                                            <p:inputText  id="apematapo" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.apeMat}" />
                                            <p:outputLabel for="nomapo" value="Primer Nombre: "/>
                                            <p:inputText  id="nomapo" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.nombre1}" />
                                            <p:outputLabel for="nomapo2" value="Segundo Nombre: "/>
                                            <p:inputText  id="nomapo2" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.nombre2}" />
                                            <p:outputLabel for="dniapo" value="Documento de identidad(Tipo):  "/>
                                            <p:selectOneMenu id="dniapo" value="DNI">
                                                <f:selectItem itemLabel="DNI" itemValue="DNI" />
                                                <f:selectItem itemLabel="Libreta electoral" itemValue="Libreta electoral" />
                                                <f:selectItem itemLabel="Pasaporte" itemValue="Pasaporte" />
                                            </p:selectOneMenu>
                                            <p:outputLabel for="nrodoc" value="Numero de documento: " />
                                            <p:inputText id="nrodoc" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.numDoc}" maxlength="8">
                                                <f:validateLength maximum="8" minimum="8"/>
                                            </p:inputText>
                                            <p:outputLabel for="sexo" value="Sexo: "/>
                                            <p:selectOneMenu id="sexo" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.sexo}">
                                                <f:selectItem itemLabel="Femenino" itemValue="Femenino" />
                                                <f:selectItem itemLabel="Masculino" itemValue="Masculino" />
                                            </p:selectOneMenu>
                                            <p:outputLabel for="telf_emerApo" value="Telefono: "/>
                                            <p:inputText  id="telf_emerApo" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.telefono}" maxlength="7">
                                                <f:validateLength maximum="7" minimum="7"/>
                                            </p:inputText>
                                            <p:outputLabel for="emailapo" value="Email: "/>
                                            <p:inputText  id="emailapo" value="#{modificarpadre.padreSeleccionado.email}" />
                                            <p:outputLabel for="estado" value="Estado: "/>
                                            <p:selectOneMenu id="estado" value="#{modificarpadre.padreSeleccionado.padreDeFamilia.estadoActivo}">
                                                <f:selectItem itemLabel="No Activo" itemValue="0" />
                                                <f:selectItem itemLabel="Activo" itemValue="1" />
                                            </p:selectOneMenu>
                                        </h:panelGrid>
                                        <br/>
                                        <br/>
                                    </p:panel>
                                </p:scrollPanel>
                                <h:panelGrid columns="2" cellpadding="10">
                                    <p:commandButton  
                                        value="Volver" 
                                        action="#{modificarpadre.retroceder}"
                                        disabled="#{modificarpadre.volverDesactivado}"
                                        type="submit"
                                        update="@form"
                                        />
                                    <p:commandButton  
                                        value="#{modificarpadre.botonContinuar}" 
                                        action="#{modificarpadre.continuar}"
                                        disabled="#{modificarpadre.continuarDesactivado}"
                                        type="submit"
                                        update="@form"
                                        />
                                </h:panelGrid>
                            </h:form>
                            <p:dialog header="Ingrese dígitos" widgetVar="camposvacios" modal="true" height="100">
                                <h:outputText value="Los campos deben ser llenados correctamente." />
                            </p:dialog>
                            <p:dialog header="No numéricos" widgetVar="no_numero" modal="true" height="100">
                                <h:outputText value="El DNI y Teléfono deben ser numéricos." />
                            </p:dialog>
                            <p:dialog header="Éxito" widgetVar="guardado" modal="true" height="100">
                                <h:outputText value="Se ha modificado correctamente la información." />
                            </p:dialog>
                            <p:dialog header="Seleccione" widgetVar="no_padre" modal="true" height="100">
                                <h:outputText value="Seleccione un padre para proseguir." />
                            </p:dialog>
                            <p:dialog header="Tiene hijos" widgetVar="tiene_hijos" modal="true" height="100">
                                <h:outputText value="El padre seleccionado tiene hijos activos." />
                            </p:dialog>
                        </p:tab>
                </p:tab>
            </p:tabView>
        </h:body >
    </f:view>
</html>